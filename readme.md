やりたいこと

人＋台座の輪郭をベクターデータで書き出したい。（台座はソフト側で足す）
書き出したベクターデータはレーザーカッターに入力する想定

仕様

人の輪郭はKinectのdepthでとる
そのままだとギザギザでレーザーが遅いし出来上がりも汚いので、滑らかにする
腰に手を当てるとかしたときにできる穴もちゃんと輪郭をとる
台座はofRect的にちゃんと直角を出したい（人と一緒に平滑化しちゃダメ）
ベクターデータはPDFで書き出す（ほんとはSVGにしたいけど面倒そう……）

手順

Kinectからdepth画像を取得
上下左右奥行きでクリッピング
ContourFinderに突っ込んで輪郭抽出（ここで最大/最小面積でフィルタリング）
輪郭を平滑化
輪郭の内部を塗りつぶして描画
台座を同じ色で描画
再度ContourFinderに突っ込む（面積のクリッピングは不要）
検出された輪郭をPDF書き出し

使用addon

ofxNI2: oFでOpenNIを使うならコレだと思ってます。
ofxCv: oFでOpenCVを使うならコレだと思ってます。
ofxOpenCv: ofxCvを使うのに使用。あとofxCvがContourFinderでのHoleの検出が未サポートのようなのでそこでは使ってます。
ofxParamEdit: GUIでのリアルタイムパラメータ調整ならコレ。（自分のだけど……あと最近はofxUIも気になってます）
ofxGui: ofxParamEditを使うのに必要
ofxCairo: 今回初めて使用。PDF書き出しに使ってます。

ハマりポイント

ofxCvのバージョン
ofxCvがmasterブランチで早々と0.9.0対応を進めているのでコンパイル通らず困りました。
とはいえそこはさすがちゃんとしていて、0.8.4というtagがあったのでそれをcheckoutして解決。

ofxCvのContourFinderで検出された輪郭がHoleかどうかがわからない
ofxCvのContourFinderは、現状ではHoleかどうかの区別なく輪郭が検出されます。
たぶんHoleは頂点の順番が逆まわりなので、それを元に自前で判定する方向もありなんですが書く意欲がわかなかったので輪郭検出にはofxOpenCvのContourFinderを使うことにしました。

ofxCairoがstrokeを書き出してくれない？
輪郭が欲しかったのでnoFillしてstrokeだけのデータにしたかったけどそうすると空データが書き出されて困った。
それ以上のことは調べてません。
